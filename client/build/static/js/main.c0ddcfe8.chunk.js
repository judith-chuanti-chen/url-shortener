(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(0),a=c(26),r=c.n(a),l=c(22),i=c(6),o=c(31),j=c(9),d=c(19),b=c.n(d),h=c(29),u=c(14),O=c(17),x=c(23),m=c(12),p=c(32),g=c(35),f="Oops, there's an unknown error... Please try again!",v=function(){var e=Object(n.useState)(!0),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(),l=Object(j.a)(r,2),o=l[0],d=l[1],v=Object(n.useState)(),S=Object(j.a)(v,2),U=S[0],y=S[1],L=Object(n.useState)({isSuccess:!1,msg:f,data:{}}),w=Object(j.a)(L,2),C=w[0],k=w[1],N=Object(n.useState)(!1),R=Object(j.a)(N,2),E=R[0],F=R[1];return E?(console.log(C),Object(s.jsx)(i.a,{to:{pathname:"/result",state:C}})):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(h.a,{children:Object(s.jsxs)(u.a,{children:[Object(s.jsxs)(u.a.Group,{controlId:"formLongUrl",children:[Object(s.jsx)(u.a.Label,{children:"Step 1: Enter website URL"}),Object(s.jsx)(O.a,{type:"url",placeholder:"Example: https://www.google.com",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(s.jsxs)(u.a.Group,{controlId:"formCustomString",children:[Object(s.jsx)("p",{children:"Step 2:"}),Object(s.jsxs)(x.a,{className:"ml-0 mb-2",children:[Object(s.jsx)(m.a,{id:"custom-btn",className:"mr-2 "+(c?"":"disabled"),onClick:function(){a(!0)},"aria-controls":"input-custom-string","aria-expanded":c,children:"Customize"}),Object(s.jsx)(m.a,{id:"auto-btn",className:"mr-2 "+(c?"disabled":""),onClick:function(){return a(!1)},children:"Auto-generate"})]}),Object(s.jsx)(p.a,{in:c,children:Object(s.jsxs)("div",{id:"input-custom-string",children:[Object(s.jsx)(u.a.Label,{children:"Enter your custom label:"}),Object(s.jsxs)(g.a,{className:"mb-3",children:[Object(s.jsx)(g.a.Prepend,{children:Object(s.jsx)(g.a.Text,{id:"base-url",children:window.location.origin+"/"})}),Object(s.jsx)(O.a,{type:"text","aria-describedby":"base-url",onChange:function(e){y(e.target.value),console.log(e.target.value)},required:!0})]})]})}),Object(s.jsx)(x.a,{className:"mt-4",children:Object(s.jsx)(m.a,{className:"m-auto btn-lg",variant:"primary",onClick:function(){return function(){var e,t,s;console.log("creatingUrl"),b.a.post("/api/url/create",{longUrl:o,customString:c?U:""}).then((function(c){switch(c.status){case 200:e=!0,t="A short URL is successfully generated for this website!",s=c.data;break;case 201:e=!0,console.log(typeof c.data),s=c.data,t="Someone has already created a short URL for this website!";break;default:e=!1,t=f}console.log(c.status),console.log(c.data)})).catch((function(c){if(c.response)switch(c.response.status){case 401:e=!1,console.log("401!"),t="This website's URL is not valid! Please try again!";break;case 409:e=!1,t="Sorry, this short URL address has been taken! Please try again!";break;default:e=!1,t=f}console.log(c.response)})).finally((function(){console.log(t),k({isSuccess:e,msg:t,data:s}),F(!0)}))}()},children:"Generate!"})})]})]})})})},S=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(o.a,{className:"text-center",children:[Object(s.jsx)("h1",{children:"Custom URL Shortener"}),Object(s.jsx)("h4",{children:"Create your own branded URL!"})]}),Object(s.jsx)(v,{})]})},U=(c(50),function(e){var t=Object(i.g)(),c=Object(n.useState)(!1),a=Object(j.a)(c,2),r=a[0],l=a[1];console.log(t);var d=t.state||{},b=d.isSuccess,h=d.msg,u=d.data,O=u||{},x=O.longUrl,p=O.shortUrl,g=O.urlCode,f=O.date;return r?Object(s.jsx)(i.a,{to:"/"+g+"/edit"}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(o.a,{className:"text-center",children:[Object(s.jsx)("h1",{children:"Custom URL Shortener"}),Object(s.jsx)("h4",{children:"Create your own branded URL!"})]}),Object(s.jsxs)("div",{className:"m-5 "+(b?"success":"fail"),children:[Object(s.jsx)("h3",{children:b?"Success!":"Failed..."}),Object(s.jsx)("p",{children:h}),u&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Long URL: ",x]}),Object(s.jsxs)("p",{children:["Short URL: ",Object(s.jsx)("a",{href:p,children:p})]}),Object(s.jsxs)("p",{children:["Created at: ",f]})]})]}),b&&u&&Object(s.jsxs)("div",{className:"m-5",children:[Object(s.jsx)("h5",{children:"Made a mistake? Go back and edit your URL!"}),Object(s.jsx)(m.a,{onClick:function(){return l(!0)},children:"Edit"})]})]})}),y=function(e){return Object(s.jsx)(h.a,{fluid:!0,className:"p-0",children:e.children})},L=c(52),w=function(){return Object(s.jsx)("div",{className:"row justify-content-center m-5",children:Object(s.jsx)(L.a,{animation:"border",variant:"primary",role:"status",children:Object(s.jsx)("span",{className:"sr-only",children:"Loading..."})})})},C=c(53),k=function(e){var t=Object(i.h)().urlCode,c=Object(n.useState)(),a=Object(j.a)(c,2),r=a[0],l=a[1],o=Object(n.useState)(!0),d=Object(j.a)(o,2),h=d[0],x=d[1],p=Object(n.useState)(),g=Object(j.a)(p,2),f=g[0],v=g[1],S=Object(n.useState)(),L=Object(j.a)(S,2),k=L[0],N=L[1];if(Object(n.useEffect)((function(){b.a.get("/api/url/".concat(t)).then((function(e){e.data&&(l(e.data),v(e.data.longUrl))})).catch((function(e){console.log(e)})).finally((function(){x(!1)}))}),[]),h)return console.log("Loading"),Object(s.jsx)(w,{});if(!r)return Object(s.jsx)(U,{result:{isSuccess:!1,msg:"Oops, sorry! We can't find this url code '".concat(t,"'")}});if(k){var R=k.path,E=k.result;return console.log(E),Object(s.jsx)(i.a,{to:{pathname:R,state:E}})}return Object(s.jsx)(y,{children:Object(s.jsxs)("div",{className:"m-5",children:[Object(s.jsxs)(u.a,{children:[Object(s.jsxs)(u.a.Group,{controlId:"formLongUrl",children:[Object(s.jsx)(u.a.Label,{children:Object(s.jsx)("b",{children:"Update website URL:"})}),Object(s.jsx)(O.a,{type:"url",onChange:function(e){return v(e.target.value)},value:f,required:!0})]}),Object(s.jsxs)(C.a,{children:[Object(s.jsx)(m.a,{variant:"primary",onClick:function(){x(!0),b.a.patch("/api/url/edit/".concat(t),{newLongUrl:f}).then((function(e){var t=e.data;l(t),N({path:"/result",result:{isSuccess:!0,msg:"Updated successfully!",data:t}})})).catch((function(e){console.log(e),N({path:"/unknown-error"})})).finally((function(){x(!1)}))},children:"Update"}),Object(s.jsx)(m.a,{variant:"danger",onClick:function(){b.a.delete("/api/url/delete/".concat(t)).then((function(e){if(console.log(e.status),200===e.status){var t={isSuccess:!0,msg:"Successfully deleted ".concat(r.shortUrl)};N({path:"/result",result:t})}else if(404===e.status){var c={isSuccess:!1,msg:"Cannot find ".concat(r.shortUrl)};N({path:"/result",result:c})}})).catch((function(e){console.log(e),N({path:"/unknown-error"})}))},children:"Delete"})]})]}),Object(s.jsxs)("div",{className:"mt-3",children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Short URL: "}),Object(s.jsx)("a",{href:r.shortUrl,children:r.shortUrl})]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Created at: "}),r.date]})]})]})})},N=c(27),R=c(24),E=function(){return Object(s.jsxs)(R.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(s.jsx)(R.a.Brand,{href:"/",children:"Custom URL Shortener"}),Object(s.jsx)(R.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(s.jsx)(R.a.Collapse,{id:"responsive-navbar-nav",children:Object(s.jsxs)(N.a,{className:"mr-auto",children:[Object(s.jsx)(N.a.Link,{href:"/",children:"Create"}),Object(s.jsx)(N.a.Link,{href:"/list",children:"All URLs"})]})})]})},F=function(){var e={isSuccess:!1,msg:"Oops, there's an unknown error... Please try again!"};return Object(s.jsx)(U,{result:e})},G=function(){var e=(new Date).getFullYear();return Object(s.jsx)(R.a,{fixed:"bottom",expand:"lg",bg:"dark",variant:"dark",children:Object(s.jsxs)(N.a,{className:"ml-auto mr-auto copyright",children:["@Copyright ",e," | J.C."]})})},P=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(),l=Object(j.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)(!0),u=Object(j.a)(h,2),O=u[0],p=u[1];if(Object(n.useEffect)((function(){b.a.get("/api/url/all").then((function(e){a(e.data)})).catch((function(e){console.log(e),d({path:"/unknown-error"})})).finally((function(){p(!1)}))}),[]),O)return Object(s.jsx)(w,{});if(o){var g=o.path,f=o.result;return Object(s.jsx)(i.a,{to:{pathname:g,state:f}})}return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(y,{children:Object(s.jsx)("div",{class:"row py-5",children:Object(s.jsx)("div",{class:"col-lg-10 mx-auto",children:Object(s.jsx)("div",{class:"card rounded shadow border-0",children:Object(s.jsx)("div",{class:"card-body bg-white rounded",children:Object(s.jsx)("div",{class:"table-responsive",children:Object(s.jsxs)("table",{id:"example",class:"table table-striped table-bordered",children:[Object(s.jsx)("thead",{className:"thead-light",children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Long URL"}),Object(s.jsx)("th",{children:"Short URL"}),Object(s.jsx)("th",{children:"Date"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:c.map((function(e){var t=new Date(e.date);return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.longUrl}),Object(s.jsx)("td",{children:Object(s.jsx)("a",{href:e.shortUrl,children:e.shortUrl})}),Object(s.jsx)("td",{children:t.toUTCString()}),Object(s.jsx)("td",{children:Object(s.jsx)(x.a,{className:"flex align-content-center ml-2 mr-2",children:Object(s.jsx)(m.a,{size:"sm",onClick:function(){return t=e.urlCode,void d({path:"/"+t+"/edit"});var t},children:"Edit"})})})]})}))})]})})})})})})})})};c(85);var D=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(E,{}),Object(s.jsx)(l.a,{children:Object(s.jsxs)(i.d,{children:[Object(s.jsx)(i.b,{exact:!0,path:"/",component:S}),Object(s.jsx)(i.b,{exact:!0,path:"/:urlCode/edit",children:Object(s.jsx)(y,{children:Object(s.jsx)(k,{})})}),Object(s.jsx)(i.b,{exact:!0,path:"/unknown-error",component:F}),Object(s.jsx)(i.b,{exact:!0,path:"/result",component:U}),Object(s.jsx)(i.b,{exact:!0,path:"/list",component:P})]})}),Object(s.jsx)(G,{})]})};r.a.render(Object(s.jsx)(D,{}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.c0ddcfe8.chunk.js.map